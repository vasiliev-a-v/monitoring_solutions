
Программа проверяет состояние и метрики с дегидраторов

модуль программы: take_dehydrator.sh
- подключается к микрокомпьютеру "R" по telnet
- находит номер ttyUSB (номер COM-порта) принадлежащий именно к дегидратору
- к микрокомпьютеру подключены несколько последовательных интерфейсов (COM-портов)
- если порт завис, то переподключает USB-порт на микрокомпьютере "R"
- запускает minicom и подключается по ttyUSB к дегидратору
- запрашивает состояние дегидратора "A"
- заносит показания дегидратора в БД Postgres через UPSERT
Пояснение, почему через UPSERT: потому что по архитектуре предполагается что таблица с текущими показаниями будет UNLOGGED. В случае перезагрузке СУБД или переключению на реплику, таблица может быть пустая, поэтому изначально неясно, что делать - INSERT или UPDATE.

Модули: это реализация интерактивного входа на устройство.
expect_get_tty.sh        - находит номер ttyUSB (номер COM-порта) принадлежащий именно к дегидратору
expect_usb_off_and_on.sh - если порт завис, то переподключает USB-порт на микрокомпьютере "R"
expect_measurements.sh   - запрашивает состояние дегидратора "A"

config.sh - файл с общими конфигурационными переменными

website_dehydrator.sh - генерирует веб-страницу с показаниями дегидратора. Куда сохранять файл настраивается переменной html_file в файле config.sh

Автор: Васильев Антон

---

Деплой:
- модули take_dehydrator.sh и website_dehydrator.sh запускаются периодически через cron.
