
Программа собирает данные о температурах с удаленных микрокомпьютеров.
Сохраняет данные в базу данных temp.
Отображает температуры по Объектам на веб-странице.
Строит температурные графики за последние два дня.

take_temp.sh
читает из микрокомпьютеров расположенных в сети данные о температуре
сохраняет данные температур в базу данных temp

take_day.sh
скрипт собирает статистику за последние 24 часа, сохраняет во временной папке
потом формирует SVG-график на GNUPlot

gnuplot_outdoor.sh
Отрисовывает график температур уличных датчиков
gnuplot_flat.sh
Отрисовывает график температур датчиков в помещениях

write_temp.sh
1. читает   из базы данных из таблицы temp_current
2. сохраняет в базу данных в  таблицу temp_changes
Это нужно потому, что в некоторых серверных температура может не меняться более суток. Из-за этого график не сможет нарисоваться.

msite_temp.bash
ВЕБ-ИНТЕРФЕЙС
отображает температуры на Объектах

take_temp_style.css
Стили необходимы для отображения графиков в виде маленьких картинок, если нажать на объект, то они разворачиваются

SQL-файлы вызываются модулями программы, изменяются (даты) и производится SQL-запрос к базе
select_temp_per_day.sql, insert_into_temp_changes.sql

create_db_temp.sql - файл dump схемы базы данных temp

  Функции в БД temp:

trig_if_changes
Триггерная функция - делает запись в таблицу при изменениях температур.
Дополнительно делает проверку на ложное срабатывание датчика: показания сильно разнятся с предыдущими, то не учитывает их

trig_if_null
Триггерная функция trig_if_null() записывает предыдущее NOT NULL значение
в таблицу temp_current, если новая температура NULL


В crontab -e прописать:
#~ Сбор температур из серверных и других объектов
  * *  *   *   *     sleep 8  && nice -n 19 /home/user/take_temp/take_temp.sh        &
  * *  *   *   *     sleep 17 && nice -n 19 /home/user/take_temp/take_day.sh         &
